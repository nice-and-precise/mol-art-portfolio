import"./hoisted.ChmoVtAF.js";function v(e){return{isOpen:!1,currentIndex:0,images:[...e]}}function E(e){return{...e,isOpen:!1}}function L(e){if(e.images.length===0||e.images.length===1)return e;const s=(e.currentIndex+1)%e.images.length;return{...e,currentIndex:s}}function k(e){if(e.images.length===0||e.images.length===1)return e;const s=e.currentIndex===0?e.images.length-1:e.currentIndex-1;return{...e,currentIndex:s}}function I(e){return e.images[e.currentIndex]}function S(e,s,g){let o=v(s);const t=document.getElementById(e);if(!t)return console.error(`Lightbox container #${e} not found`),{destroy:()=>{}};const l=t.querySelector(".lightbox"),a=t.querySelector(".lightbox-backdrop"),d=t.querySelector(".lightbox-close"),f=t.querySelector(".lightbox-prev"),r=t.querySelector(".lightbox-next"),u=t.querySelector(".lightbox-image"),m=t.querySelector(".lightbox-caption");if(!l||!a||!d||!f||!r||!u)return console.error("Required lightbox elements not found"),{destroy:()=>{}};function i(){if(!(!l||!u)){if(o.isOpen){l.classList.add("active"),l.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const c=I(o);c&&(u.src=c.src,u.alt=c.alt,m&&(m.textContent=c.caption||"",m.style.display=c.caption?"block":"none")),d?.focus()}else l.classList.remove("active"),l.setAttribute("aria-hidden","true"),document.body.style.overflow="";g?.(o)}}function n(){o=E(o),i()}function y(){o=L(o),i()}function h(){o=k(o),i()}function b(c){if(o.isOpen)switch(c.key){case"Escape":n();break;case"ArrowRight":c.preventDefault(),y();break;case"ArrowLeft":c.preventDefault(),h();break}}function p(c){(c.target===a||c.target===l)&&n()}return d.addEventListener("click",n),f.addEventListener("click",h),r.addEventListener("click",y),document.addEventListener("keydown",b),a.addEventListener("click",p),{destroy(){d.removeEventListener("click",n),f.removeEventListener("click",h),r.removeEventListener("click",y),document.removeEventListener("keydown",b),a.removeEventListener("click",p),document.body.style.overflow=""}}}const x=document.getElementById("image-gallery");if(!x)console.error("Image gallery container not found");else{let e=function(i){const n=g[i];!n||!t||(r&&(r.style.display="flex"),t&&(t.style.opacity="0"),d&&(d.textContent=(i+1).toString()),t.src=n.src,t.alt=n.alt,t.onload=()=>{r&&(r.style.display="none"),t&&(t.style.opacity="1")},t.onerror=()=>{console.error(`Failed to load image: ${n.src}`),r&&(r.style.display="none"),t&&(t.style.opacity="1"),t.alt=`Failed to load: ${n.alt}`},setTimeout(()=>{r&&r.style.display!=="none"&&(console.warn(`Image load timeout for: ${n.src}`),r&&(r.style.display="none"),t&&(t.style.opacity="1"))},5e3),l&&(n.caption?(l.textContent=n.caption,l.style.display="block"):l.style.display="none"),u&&(u.textContent=`Image ${i+1} of ${g.length}: ${n.alt}`))};const s=x.querySelectorAll(".thumbnail-button"),g=Array.from(s).map(i=>{const n=i.querySelector("img"),y=n?.src||"";return console.log("Lightbox image src:",y),{src:y,alt:n?.alt||"",caption:n?.alt||""}}),o=x.querySelector(".lightbox"),t=o?.querySelector(".lightbox-image"),l=o?.querySelector(".lightbox-caption"),a=o?.querySelector(".lightbox-counter"),d=a?.querySelector(".current-index"),f=a?.querySelector(".total-images"),r=o?.querySelector(".lightbox-loading"),u=o?.querySelector(".sr-only");f&&(f.textContent=g.length.toString());const m=S("image-gallery",g,i=>{i.isOpen&&e(i.currentIndex)});s.forEach((i,n)=>{i.addEventListener("click",()=>{o&&(o.classList.add("active"),o.setAttribute("aria-hidden","false"),e(n))})}),window.addEventListener("beforeunload",()=>{m.destroy()})}
