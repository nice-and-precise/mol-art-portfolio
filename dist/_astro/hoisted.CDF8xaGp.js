import"./hoisted.ChmoVtAF.js";function p(r){const t=new URLSearchParams(r.startsWith("?")?r:`?${r}`),o=t.getAll("technique"),e=t.getAll("color"),n=t.get("featured")==="true"?!0:null,a=t.get("sort")||"date-desc";return{techniques:o,colors:e,featured:n,sort:a}}function q(r,t){return r.filter(o=>!(t.techniques.length>0&&!t.techniques.every(c=>o.techniques.includes(c))||t.colors.length>0&&!t.colors.every(c=>o.colors.includes(c))||t.featured===!0&&!o.featured))}function S(r,t){const o=[...r];switch(t){case"date-desc":return o.sort((e,c)=>c.date.getTime()-e.date.getTime());case"date-asc":return o.sort((e,c)=>e.date.getTime()-c.date.getTime());case"title-asc":return o.sort((e,c)=>e.title.localeCompare(c.title));case"title-desc":return o.sort((e,c)=>c.title.localeCompare(e.title));case"featured":return o.sort((e,c)=>e.featured&&!c.featured?-1:!e.featured&&c.featured?1:c.date.getTime()-e.date.getTime());default:return o}}function A(r){const t=new URLSearchParams;r.techniques.forEach(e=>{t.append("technique",e)}),r.colors.forEach(e=>{t.append("color",e)}),r.featured===!0&&t.append("featured","true"),r.sort!=="date-desc"&&t.append("sort",r.sort);const o=t.toString();return o?`?${o}`:""}function v(){const r=p(window.location.search);r.techniques.forEach(e=>{const c=document.querySelector(`[data-technique="${e}"]`);c&&(c.classList.add("active"),c.setAttribute("aria-pressed","true"))}),r.colors.forEach(e=>{const c=document.querySelector(`[data-color="${e}"]`);c&&(c.classList.add("active"),c.setAttribute("aria-pressed","true"))});const t=document.querySelector("#featured-only");t&&r.featured&&(t.checked=!0);const o=document.querySelector("#sort-select");o&&(o.value=r.sort),i(r),l(r)}function i(r){const t=document.querySelectorAll(".pottery-card"),o=Array.from(t).map(s=>({slug:s.getAttribute("data-piece-id")||"",title:s.querySelector("h2")?.textContent||"",date:new Date(s.getAttribute("data-date")||""),techniques:JSON.parse(s.getAttribute("data-techniques")||"[]"),colors:JSON.parse(s.getAttribute("data-colors")||"[]"),featured:s.getAttribute("data-featured")==="true"})),e=q(o,r),c=new Set(e.map(s=>s.slug)),n=S(e,r.sort);t.forEach((s,b)=>{const f=s.getAttribute("data-piece-id");if(f&&c.has(f)){s.classList.remove("hidden"),s.style.display="";const y=n.findIndex(g=>g.slug===f);s.style.order=y.toString(),s.style.animationDelay=`${y*50}ms`}else s.classList.add("hidden"),s.style.display="none"});const a=document.querySelector(".no-results");a&&(e.length===0?a.style.display="block":a.style.display="none")}function l(r){const t=r.techniques.length+r.colors.length+(r.featured?1:0),o=document.querySelector(".filter-count");o&&(t===0?o.style.display="none":(o.style.display="inline",o.textContent=`${t} filter${t===1?"":"s"} active`))}function d(){const r=[],t=[];document.querySelectorAll("[data-technique].active").forEach(a=>{const s=a.getAttribute("data-technique");s&&r.push(s)}),document.querySelectorAll("[data-color].active").forEach(a=>{const s=a.getAttribute("data-color");s&&t.push(s)});const e=document.querySelector("#featured-only")?.checked?!0:null,n=document.querySelector("#sort-select")?.value||"date-desc";return{techniques:r,colors:t,featured:e,sort:n}}function u(r){const t=A(r),o=t?`${window.location.pathname}${t}`:window.location.pathname;window.history.pushState({},"",o)}function L(){document.querySelectorAll("[data-technique].active, [data-color].active").forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")});const r=document.querySelector("#featured-only");r&&(r.checked=!1);const t=document.querySelector("#sort-select");t&&(t.value="date-desc");const o={techniques:[],colors:[],featured:null,sort:"date-desc"};i(o),u(o),l(o)}typeof window<"u"&&document.addEventListener("DOMContentLoaded",()=>{if(document.querySelector(".gallery-filters")){v(),document.querySelectorAll("[data-technique]").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active");const c=e.classList.contains("active");e.setAttribute("aria-pressed",c.toString());const n=d();i(n),u(n),l(n)})}),document.querySelectorAll("[data-color]").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active");const c=e.classList.contains("active");e.setAttribute("aria-pressed",c.toString());const n=d();i(n),u(n),l(n)})});const r=document.querySelector("#featured-only");r&&r.addEventListener("change",()=>{const e=d();i(e),u(e),l(e)});const t=document.querySelector("#sort-select");t&&t.addEventListener("change",()=>{const e=d();i(e),u(e),l(e)});const o=document.querySelector(".clear-filters");o&&o.addEventListener("click",L)}});const h="/mol-art-portfolio",m=h.endsWith("/")?h:h+"/";document.querySelectorAll(".pottery-card").forEach(r=>{r.addEventListener("keydown",t=>{if(t.key==="Enter"||t.key===" "){t.preventDefault();const o=r.getAttribute("data-piece-id");o&&(window.location.href=`${m}gallery/${o}`)}}),r.addEventListener("click",()=>{const t=r.getAttribute("data-piece-id");t&&(window.location.href=`${m}gallery/${t}`)})});
